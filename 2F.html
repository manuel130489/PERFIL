<!DOCTYPE html>
<html>

<head>
  <title>QGIS Track Profile 2 Web</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <style>
    html,
    body,
    #map,
    #elevation-div {
      height: 100%;
      width: 100%;
      padding: 0px;
      margin: 0px;
      position: relative;
      z-index: 9999;
    }

    #elevation-div { overflow: visible; }
    #map {
      height: 75%;
      position: relative;
      z-index: 1;
    }

    #elevation-div {
      height: 25%;
      font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
    }

    .data-summary {
      font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif;
      font-size: 12px;
      position: absolute;
      bottom: 0;
      left: 45px;
    }

    .data-summary .summaryvalue {
      font-weight: bold;
    }

  </style>
  <style>
   .custom-theme.leaflet-control.elevation .area {
    fill: #d45f5f;
    stroke: hsla(60, 0%, 0%, 0.85);
    stroke-width: 2.5;
   }

   .custom-theme.height-focus.circle-lower {
     fill: #ffb800;
   }

   .custom-theme.elevation-polyline {
     stroke: #ff0000;
     stroke-opacity: 0.85 ;
   }
 </style>

  <!-- Leaflet (JS/CSS) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.2/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.3.2/dist/leaflet.js"></script>
  <!-- D3.js -->
  <script src="https://unpkg.com/d3@4.13.0/build/d3.min.js" charset="utf-8"></script>
  <!-- leaflet-gpx -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.4.0/gpx.js"></script>
  <!-- leaflet-elevation -->
  <link rel="stylesheet" href="https://unpkg.com/@raruto/leaflet-elevation@0.3.9/leaflet-elevation.min.css" />
  <script src="https://unpkg.com/@raruto/leaflet-elevation@0.3.9/leaflet-elevation.min.js"></script>

</head>

<body>

  <div id="map"></div>
  <div id="elevation-div" class="leaflet-control elevation"></div>

  <div id="data-summary" class="data-summary"><span class="totlen"><span class="summarylabel">Total Length: </span><span class="summaryvalue">0</span></span> &mdash; <span class="maxele"><span class="summarylabel">Max Elevation: </span><span class="summaryvalue">0</span></span>
    &mdash; <span class="minele"><span class="summarylabel">Min Elevation: </span><span class="summaryvalue">0</span></span></div>

  <script>
  var opts = {"map": {"center": [41.4583, 12.7059], "zoom": 5, "markerZoomAnimation": false, "zoomControl": false}, "zoomControl": {"position": "topleft"}, "elevationControl": {"data": "{\"name\":\"EJES\", \"type\":\"FeatureCollection\",\"features\": [{ \"type\": \"Feature\", \"properties\": { }, \"geometry\": { \"type\": \"MultiLineString\", \"coordinates\": [ [ [ -72.56042898, 7.9163040599999945,250.9155000000028 ], [ -72.56048912999998, 7.916245150000004,250.4030000000057 ], [ -72.56058507, 7.915924440000003,251.73630000000412 ], [ -72.56076113, 7.915613879999991,250.20750000000407 ], [ -72.56096499, 7.915451860000017,251.2740000000049 ], [ -72.56115879, 7.915295680000007,251.48589999999967 ], [ -72.56152772, 7.915083729999999,246.63809999999648 ], [ -72.56181745, 7.914924389999994,245.00250000000233 ], [ -72.56226148, 7.9146256900000145,242.71080000000075 ], [ -72.56266833, 7.9143982900000065,242.27060000000347 ], [ -72.56304810999998, 7.9141928500000045,240.05220000000554 ], [ -72.56338361999997, 7.913970260000006,238.8411999999953 ], [ -72.56373766, 7.913778830000037,236.9198000000033 ], [ -72.56476245999998, 7.91294254,228.8021000000008 ], [ -72.56497029, 7.912730290000012,230.1347999999998 ], [ -72.56506974999999, 7.912592760000032,232.27670000000217 ], [ -72.56514249999996, 7.912310400000001,235.92630000000645 ], [ -72.56521811999998, 7.912032470000035,238.46799999999348 ], [ -72.56553201999999, 7.911701110000016,242.35599999999977 ], [ -72.56576651999998, 7.911441109999991,243.8923000000068 ], [ -72.56598199999999, 7.91121361,247.48110000000452 ], [ -72.56630093999999, 7.91100353000002,250.6201000000001 ], [ -72.56654972, 7.910711190000019,253.20230000000447 ], [ -72.56666635999999, 7.910440010000012,256.4287999999942 ], [ -72.56679704, 7.91019655000002,258.14949999999953 ], [ -72.56694098, 7.909969140000023,260.2186999999976 ], [ -72.56717121999999, 7.909515009999997,264.66599999999744 ], [ -72.56719650999997, 7.909486680000008,265.6146000000008 ], [ -72.56721194999999, 7.909463830000004,265.38150000000314 ], [ -72.56725089, 7.9094056799999946,265.81840000000375 ], [ -72.56726968000001, 7.90937705000001,266.1747000000032 ], [ -72.56728738999999, 7.909349620000034,266.34470000000147 ], [ -72.56732241000002, 7.90930553,267.3173999999999 ], [ -72.56733511999998, 7.909279900000012,267.68979999999283 ], [ -72.56737193, 7.909195940000036,268.13559999999416 ], [ -72.56738484, 7.909161999999995,268.0581999999995 ], [ -72.56739813, 7.9091265400000434,269.03949999999895 ], [ -72.56742830999998, 7.90905795,269.12300000000687 ], [ -72.56745318, 7.909000169999993,269.4976000000024 ], [ -72.56746639, 7.908972040000024,269.8064000000013 ], [ -72.56749918, 7.908921259999995,270.01720000000205 ], [ -72.56754062, 7.908880630000006,269.7755999999936 ], [ -72.56761796999999, 7.908828990000009,270.0706000000064 ], [ -72.56767434999999, 7.9088044599999945,270.5706000000064 ], [ -72.56773262, 7.908788090000005,271.6695999999938 ], [ -72.56778317999999, 7.908782580000012,273.0155999999988 ], [ -72.56793024, 7.908773919999986,273.81380000000354 ], [ -72.56812054, 7.90876586000003,277.1030000000028 ], [ -72.56842042999999, 7.908839840000003,278.9070999999967 ], [ -72.56877817999998, 7.90885218,277.75100000000384 ], [ -72.56916288, 7.908794740000024,275.56470000000263 ], [ -72.56940822, 7.908731860000016,276.21480000000156 ], [ -72.56977167, 7.908675779999986,274.8463000000047 ], [ -72.57029669999999, 7.908596520000002,274.70299999999406 ], [ -72.57053953, 7.908562130000006,276.00500000000466 ], [ -72.57073048, 7.90856377,274.6671999999962 ], [ -72.57114267, 7.908638980000018,275.73330000000715 ], [ -72.57135702, 7.908675970000011,275.1429999999964 ], [ -72.57158158999998, 7.9086856600000255,273.81879999999364 ], [ -72.57211905, 7.9085781299999995,270.6024999999936 ], [ -72.57239784, 7.908487230000017,269.68589999999676 ], [ -72.57271651, 7.908389710000011,266.9520000000048 ], [ -72.57305773, 7.908339960000017,265.8945999999996 ], [ -72.57327065000001, 7.90829630000003,265.2618999999977 ], [ -72.57364112, 7.908222910000001,263.0078000000067 ], [ -72.5739236, 7.908089300000011,263.1261999999988 ], [ -72.57440908, 7.907838299999998,259.4756000000052 ], [ -72.57476285, 7.907659230000004,257.63000000000466 ], [ -72.57507827, 7.907505060000006,255.9844000000012 ], [ -72.57535398, 7.907435130000003,256.9747000000061 ], [ -72.57574906, 7.907277509999996,257.394100000005 ], [ -72.57607983, 7.907121330000001,257.7887999999948 ], [ -72.57692493999998, 7.906802170000015,257.415599999993 ], [ -72.5774364, 7.906567330000022,260.21719999999914 ], [ -72.57773926, 7.906424640000003,264.71689999999944 ], [ -72.57798102999999, 7.906340120000009,264.0310999999929 ], [ -72.57821323, 7.906372700000018,262.9183000000048 ], [ -72.57893884999999, 7.906504399999993,253.521900000007 ], [ -72.57932196, 7.906536780000006,247.60420000000158 ], [ -72.57959813999999, 7.9065962300000034,243.43790000000445 ], [ -72.57981515, 7.906571490000001,242.01260000000184 ], [ -72.57996921, 7.906557639999987,239.4484999999986 ], [ -72.58021772, 7.906510970000007,236.98500000000058 ], [ -72.58041865, 7.906434940000014,235.31449999999313 ], [ -72.58059873999999, 7.906331019999977,236.0216999999975 ], [ -72.58098216999998, 7.906265739999996,232.18510000000242 ], [ -72.58115117, 7.906292450000009,230.09269999999378 ], [ -72.58137959999999, 7.906368799999996,228.64489999999932 ], [ -72.58152965999999, 7.906455570000006,229.34279999999853 ], [ -72.58168837, 7.906546359999997,229.50960000000487 ], [ -72.58185782, 7.906565680000022,228.38289999999688 ], [ -72.58216416, 7.906500080000016,224.55359999999928 ], [ -72.58236037999998, 7.906441690000017,221.0280000000057 ], [ -72.58258303999999, 7.906274819999997,219.49629999999888 ], [ -72.58275751999999, 7.906230430000003,216.98519999999553 ], [ -72.58327757259525, 7.906000220739441,210.5 ], [ -72.58343250339783, 7.905898224627735,208.1999999999971 ], [ -72.58354870149977, 7.905813012686317,206.10000000000582 ], [ -72.58370879666242, 7.9057587869054045,205.60000000000582 ], [ -72.58388696708542, 7.905794937426029,206.60000000000582 ], [ -72.5841387296396, 7.90586982064727,207.10000000000582 ], [ -72.58443144999997, 7.905976300000011,205.83030000000144 ], [ -72.58453972, 7.905940270000007,206.36000000000058 ], [ -72.58470334999998, 7.905869690000044,205.89530000000377 ], [ -72.58479272999999, 7.905764349999999,206.46869999999763 ], [ -72.58485593, 7.9056446299999985,208.05689999999595 ], [ -72.58505584, 7.9054447799999785,209.12639999999374 ], [ -72.58517889999999, 7.905399080000017,209.69259999999485 ], [ -72.58538812999998, 7.905366499999999,210.04180000000633 ], [ -72.58566487, 7.905338200000007,209.9265000000014 ], [ -72.58590431, 7.905331670000005,209.42900000000373 ], [ -72.58605372999999, 7.90529648,208.87170000000333 ], [ -72.58627586, 7.905188190000017,207.85000000000582 ], [ -72.58640962, 7.905046340000009,209.00890000000072 ], [ -72.58649317, 7.904934080000019,206.30079999999725 ], [ -72.58662472999998, 7.904806580000018,206.48609999999462 ], [ -72.58677894, 7.904718390000007,206.19520000000193 ], [ -72.58695894999998, 7.904628200000026,208.06440000000293 ], [ -72.58709105, 7.904539220000022,209.60529999999562 ], [ -72.58720652, 7.904480290000023,209.71940000000177 ], [ -72.58730171, 7.904404730000018,208.806700000001 ], [ -72.58736514999998, 7.904378620000018,208.74899999999616 ], [ -72.58750847459581, 7.904430255273238,207.0399999999936 ], [ -72.58763734, 7.904696209999994,206.4033000000054 ], [ -72.58772445, 7.9047829300000085,207.18330000000424 ], [ -72.58773763, 7.90478679000002,207.1255999999994 ]]] } }]}", "options": {"position": "topright", "theme": "custom-theme", "useHeightIndicator": true, "collapsed": true, "detachedView": true, "elevationDiv": "#elevation-div", "followPositionMarker": true, "autohide": false}}, "layersControl": {"options": {"collapsed": true}}, "otmLayer": {"url": "http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}", "options": {"attribution": "&copy; <a href=\"http://www.esri.com/\">Esri</a>"}}} ;
    var map = new L.Map('map', opts.map);

    var baseLayers = {};
    baseLayers.OTM = new L.TileLayer(opts.otmLayer.url, opts.otmLayer.options);

    var controlZoom = new L.Control.Zoom(opts.zoomControl);
    var controlElevation = L.control.elevation(opts.elevationControl.options);
    var controlLayer = L.control.layers(baseLayers, null, opts.layersControl.options);

    controlZoom.addTo(map);
    controlLayer.addTo(map);

    map.addLayer(baseLayers.OTM);

    map.on('eledata_loaded', function(e) {
      var q = document.querySelector.bind(document);
      var track = e.track_info;

      controlLayer.addOverlay(e.layer, e.name);

      q('.totlen .summaryvalue').innerHTML = track.distance.toFixed(2) + " km";
      q('.maxele .summaryvalue').innerHTML = track.elevation_max.toFixed(2) + " m";
      q('.minele .summaryvalue').innerHTML = track.elevation_min.toFixed(2) + " m";
    });

    controlElevation.loadChart(map);
    controlElevation.loadData(opts.elevationControl.data);
  </script>

</body>

</html>
